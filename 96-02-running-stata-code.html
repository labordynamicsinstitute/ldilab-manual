

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Running Code in Stata &#8212; Training Manual For Reproducibility Verification</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/style.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '96-02-running-stata-code';</script>
    <link rel="canonical" href="https://labordynamicsinstitute.github.io/ldilab-manual/96-02-running-stata-code.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using scan_packages.do" href="96-03-stata-scan-packages.html" />
    <link rel="prev" title="Using config.do in STATA" href="96-01-using-config-stata.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>


  <div class="bd-header-announcement container-fluid bd-header-announcement">
    <div class="bd-header-announcement__content">This is not yet fully debugged - report any issues!</div>
  </div>

  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.jpg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/logo.jpg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01-background.html">Background</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Preliminary Tasks</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="02-01-pre-requisites.html">Pre-requisites</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="02-02-pre-training-tasks.html">Pre-training tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="02-03-toolkit.html">Toolkit</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="04-01-concepts.html">Basic Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="04-02-reproducible-practices.html">Reproducible practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="04-03-readme-template.html">The README template</a></li>
<li class="toctree-l1"><a class="reference internal" href="05-data-citations-and-das.html">Data citations and data availability statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="06-basic-flow.html">Generic data workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="07-basic-assessing-reproducibility.html">Assessing computational reproducibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="08-details-replication-report.html">A guided walk through the Replication Report</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">AEA-specific Jira Workflow</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="11-00-jira-workflow.html">AEA Jira workflow</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="11-01-workflow-assigned.html">Assigned</a></li>
<li class="toctree-l2"><a class="reference internal" href="11-02-workflow-create-repo.html">Creating a repository and running pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="11-03-workflow-in-progress.html">In Progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="11-04-workflow-parta.html">Preparing Part A - Preliminary Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="11-05-preparing-to-run-code.html">Preparing to Run Code (Part B)</a></li>
<li class="toctree-l2"><a class="reference internal" href="11-06-running-code.html">Running Code (Part B)</a></li>
<li class="toctree-l2"><a class="reference internal" href="11-07-workflow-writing-report.html">Writing Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="11-08-report-completed.html">Report completed</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="12-jira-revision-guidance.html">AEA: Revision reports after author resubmission</a></li>
<li class="toctree-l1"><a class="reference internal" href="00-meetings.html">AEA-related meetings</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Advanced AEA-related tasks</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="20-checking-unassigned-tickets.html">Checking Unassigned Jira Tickets</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="13-approving-issues.html">AEA: Reviewing and (Pre-) Approving Reports</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="13-1-approving-issues-original.html">Original Replication Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="13-2-approving-issues-revision.html">Revision Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="13-3-approving-recommendations.html">Choosing a Recommendation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="30-jira-prepare-publication.html">AEA: Submitting information back to the Editorial Office and to authors</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="31-jira-openicpsr-setup.html">Basic setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="32-jira-submitting.html">Submitting to the JMS ScholarOne</a></li>
<li class="toctree-l2"><a class="reference internal" href="33-jira-delete-nda-data.html">Deleting restricted data</a></li>
<li class="toctree-l2"><a class="reference internal" href="34-openicpsr-preparing.html">Submitting deposit-related information via openICPSR</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="50-openicpsr-related-tasks.html">AEA: Interfacing with repositories</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="51-openicpsr-monitoring-pending.html">AEA: Monitoring Pending openICPSR Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="52-openicpsr-publishing-deposit.html">AEA: Publishing a deposit</a></li>
<li class="toctree-l2"><a class="reference internal" href="53-openicpsr-add-article-doi.html">Adding the article DOI to the openICPSR deposit metadata</a></li>

</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="40-Instructions-PandP-Checks.html">AEA: Instructions for Papers and Proceedings checks</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Running code</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="96-00-running-code.html">Guidelines for running code</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="96-00-using-Stata.html">Stata-related procedures</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="96-01-using-config-stata.html">Using config.do in STATA</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Running Code in Stata</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-03-stata-scan-packages.html">Using scan_packages.do</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-04-stata-on-linux.html">Stata on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-05-debugging-stata.html">Debugging Stata</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="96-10-using-R.html">R-related procedures</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="96-11-using-config-r.html">Using config.R in R</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-12-running-r-code.html">Running Code in R</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-14-r-on-biohpc.html">Running R on Linux systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-15-r-from-other.html">Running R from other software</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-16-debugging-r.html">Debugging R</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="96-20-using-matlab.html">MATLAB-related procedures</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="96-21-using-config-matlab.html">Adding <code class="docutils literal notranslate"><span class="pre">config.m</span></code> to MATLAB and path names</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-22-running-matlab-code.html">Running MATLAB without the desktop GUI and with log file</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-23-dynare-matlab.html">Running Dynare from MATLAB</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-24-debugging-matlab.html">Debugging MATLAB-related problems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="96-30-running-python-jupyter.html">Python-related procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="96-40-using-julia.html">Julia-related procedures</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="96-50-using-docker.html">Docker-related procedures</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="96-51-docker-windows.html">Docker on Windows</a></li>

</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="96-70-using-mathematica.html">Mathematica-related procedures</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="96-80-sundry.html">Rare software</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="96-81-using-ox.html">Ox-related procedures</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-82-installing-add-ons.html">Mosek</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Sundry other guidance</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="71-External-reproducibility-checks.html">External reproducibility checks</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="90-Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="91-setup-checklist.html">Setup Checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="92-Privacy.html">Privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="93-Communication.html">Communication</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="60-tips-for-identifying-differences.html">Identifying differences between original manuscript and reproduction</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="61-screenshot-windows.html">Using screenshot and annotation tools on Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="62-screenshot-macos.html">Using screenshot and annotation tools on macOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="68-include-screenshots-in-report.html">Include Screenshots in the Report</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="94-00-downloading-data.html">Downloading Data</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="94-01-how-to-use-openICPSR-backend.html">Using pre-publication openICPSR Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="94-02-alternate-downloads.html">Alternate sources of data</a></li>
<li class="toctree-l2"><a class="reference internal" href="94-03-private-data.html">Accessing privately provided data</a></li>
<li class="toctree-l2"><a class="reference internal" href="94-05-globus-transfers.html">Globus Transfers</a></li>
<li class="toctree-l2"><a class="reference internal" href="94-04-Updating_Materials.html">Updating Replication Materials after Revisions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="95_Access_to_computers.html">Access to Computers</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="95-10-windows-remote.html">Connecting to remote Windows servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="95-15-linux-remote.html">Connecting to remote Linux servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="95-20-codeocean.html">Reproducibility Checks in Codeocean</a></li>
<li class="toctree-l2"><a class="reference internal" href="95-30-wholetale.html">Conducting reproducibility checks on WholeTale</a></li>
<li class="toctree-l2"><a class="reference internal" href="95-40-codespaces.html">Computing using Github Codespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="95-50-setup-bash.html">Setting up your Bash environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="95-60-general-setup.html">Additional setup instructions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="97-00-authentication.html">Authentication-related issues</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="97-01-Bitbucket-authentication.html">Bitbucket Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="97-02-openicpsr-authentication.html">openICPSR Authentication</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="96-90-00-useful-scripts.html">Various helpful scripts</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="96-90-advanced_pdf_extractor.html">Advanced PDF Content Extractor</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-90-download_box_private.html">download_box_private.py - Download files from private Box folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-90-download_dv.html">download_dv.py - Download datasets from Dataverse repositories</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-90-download_openicpsr-private.html">download_openicpsr-private.py - Download files from private openICPSR deposits</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-90-download_osf.html">download_osf.sh - Download files from Open Science Framework (OSF) projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-90-download_worldbank.html">World Bank Reproducible Research Repository Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-90-download_zenodo_draft.html">download_zenodo_draft.py - Download files from Zenodo draft deposits</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-90-download_zenodo_public.html">download_zenodo_public.sh - Download files from public Zenodo repositories</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-90-generate_png_diff.html">generate_png_diff.sh - Generate visual diffs for modified PNG images</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-90-matlab_convert_fig.html">matlab_convert_fig.m - Convert MATLAB .fig files to PNG format</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-90-matlab_convert_mat2csv.html">matlab_convert_mat2csv.m - Convert MATLAB .mat files to CSV format</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-90-mk_tex_table.html">mk_tex_table.sh - Convert standalone LaTeX table files to PDF documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-90-sync-codeocean.html">sync-codeocean.sh - Synchronize CodeOcean capsules with local repositories</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="98-00-sundry-correspondence.html">Various templates for correspondence by AEA Data Editor team members</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="98-01-correspondence-legacy-updates.html">Preparing a Legacy Deposit for Updates by Authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="98-02-correspondence-ipums-beta-request.html">IPUMS Beta API request</a></li>
<li class="toctree-l2"><a class="reference internal" href="98-03-correspondence-requesting-restricted-access-data.html">Requesting Restricted-Access Data from Authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="98-04-correspondence-external-reproducibility-check.html">Request for External Reproducibility Check (general)</a></li>
<li class="toctree-l2"><a class="reference internal" href="98-05-clarification-privately-provided.html">Clarification regarding privately-provided restricted access files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="99-tricky-stuff.html">Technical issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="LDI-Replication-Lab-Code-of-Conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="Video-etiquette.html">Videoconferencing Rules and Etiquette</a></li>
<li class="toctree-l1"><a class="reference internal" href="99-References.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="99-older-versions.html">Older versions</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/labordynamicsinstitute/ldilab-manual" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/labordynamicsinstitute/ldilab-manual/edit/main/96-02-running-stata-code.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/labordynamicsinstitute/ldilab-manual/issues/new?title=Issue%20on%20page%20%2F96-02-running-stata-code.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/96-02-running-stata-code.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Running Code in Stata</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-check-for-a-main-do-file">Step 1: check for a “main” .do file</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#when-a-main-do-file-is-provided">When a main .do file is provided</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#when-a-main-do-file-is-not-provided">When a main .do file is NOT provided</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-place-config-do-where-the-main-do-file-is-located">Step 2: place config.do where the main .do file is located</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-include-config-do-in-the-main-do-file">Step 3: include config.do in the main .do file</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-modify-config-do">Step 4: Modify config.do</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-5-modifying-paths-if-necessary-in-author-provided-code">Step 5: modifying paths if necessary in author-provided code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-6-modifying-the-main-do-file">Step 6: Modifying the main .do file</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-7-run-the-code">Step 7: Run the Code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#checking-for-a-complete-run-debugging-and-running-the-master-in-pieces">Checking for a complete run, debugging and running the master in pieces</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="running-code-in-stata">
<span id="id1"></span><h1>Running Code in Stata<a class="headerlink" href="#running-code-in-stata" title="Permalink to this heading">#</a></h1>
<p>Although, there are plenty of ways to run code in Stata, our goal with these instructions is to show the easiest way to do it, by minimizing both the manual steps replicators have to go through and the chance of making a mistake that prevents a successful run.</p>
<p>In essence, these instructions show how to deal with the three most common actions that replicators have to undertake when running Stata code:</p>
<ol class="arabic simple">
<li><p>Making sure that paths (i.e., something like “<code class="docutils literal notranslate"><span class="pre">Mycomputer/Documents/Workspace/</span></code>”) in the .do files (Stata scripts) reflect the appropriate location of code, data, and output in the computer where the code is run.</p></li>
<li><p>Installing user-written functions, programs, or packages that are necessary to do computations and produce tables/figures.</p></li>
<li><p>Creating .log files (files that record, in this case, Stata output) of the replication attempts.</p></li>
</ol>
<section id="step-1-check-for-a-main-do-file">
<h2>Step 1: check for a “main” .do file<a class="headerlink" href="#step-1-check-for-a-main-do-file" title="Permalink to this heading">#</a></h2>
<div class="admonition-action-check-the-readme-or-the-repository-and-determine-if-a-main-do-file-was-provided admonition">
<p class="admonition-title"><strong>[ACTION]</strong> Check the README or the repository and determine if a main .do file was provided.</p>
<p>A main .do file is a Stata script that will call, in the correct sequence, all the programs necessary to construct analysis datasets, do all computations, and produce figures and tables. If a main do file exists, it should be mentioned in the README. In most cases, running a single main do file is sufficient to complete the reproduction. In general, a main script does not need to be a .do file. However, we will focus on cases where all work done in Stata is reduced to executing a single .do file.</p>
</div>
<section id="when-a-main-do-file-is-provided">
<h3>When a main .do file is provided<a class="headerlink" href="#when-a-main-do-file-is-provided" title="Permalink to this heading">#</a></h3>
<p>If there is a main do file, continue with <a class="reference internal" href="#step2"><span class="std std-ref">Step 2</span></a>.</p>
</section>
<section id="when-a-main-do-file-is-not-provided">
<span id="create-master"></span><h3>When a main .do file is NOT provided<a class="headerlink" href="#when-a-main-do-file-is-not-provided" title="Permalink to this heading">#</a></h3>
<div class="admonition-action-if-a-main-do-file-is-not-provided-you-should-create-a-one admonition">
<p class="admonition-title"><strong>[ACTION]</strong> If a main .do file is not provided, you should create a one. </p>
<p>Identify all the programs (do files) that need to be run, and create a main file. This is easy!</p>
</div>
<p>To create a do file follow the following steps:</p>
<ol class="arabic simple">
<li><p>Check that the README for specific instructions about the order in which each program is supposed to be run. If there are no such instructions, or they are not obvious by the name of the programs, is probably best to not create a main do file.</p></li>
<li><p>Assuming that the sequence of programs is clear to you, open stata and click on the “New do file editor” (you can also work on Visual Studio Code):</p></li>
</ol>
<p><img alt="do_editor" src="_images/doeditor.png" /></p>
<p>To open the do file editor:</p>
<p><img alt="do_editor2" src="_images/doeditor2.png" /></p>
<ol class="arabic simple" start="3">
<li><p>In the first line write <code class="docutils literal notranslate"><span class="pre">include</span> <span class="pre">&quot;config.do&quot;</span></code></p></li>
<li><p>Write the command <code class="docutils literal notranslate"><span class="pre">do</span></code> and the (quoted) path of each program that needs to be run. Write them in the correct sequence.</p></li>
</ol>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">include</span> <span class="s2">&quot;config.do&quot;</span>
 
<span class="o">*</span> <span class="n">Assuming</span> <span class="n">scenario</span> <span class="s2">&quot;A&quot;</span>

<span class="n">do</span> <span class="s2">&quot;$</span><span class="si">{rootdir}</span><span class="s2">/code/0_first_program.do&quot;</span> 
<span class="n">do</span> <span class="s2">&quot;$</span><span class="si">{rootdir}</span><span class="s2">/code/1_second_program.do&quot;</span>
<span class="n">do</span> <span class="s2">&quot;$</span><span class="si">{rootdir}</span><span class="s2">/code/2_third_program.do&quot;</span>
<span class="n">do</span> <span class="s2">&quot;$</span><span class="si">{rootdir}</span><span class="s2">/code/appendix_code/appendix.do&quot;</span>

</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Save your main file.</p></li>
</ol>
<p>At the end your main .do file may look like this:</p>
<p><img alt="main" src="_images/master-example.png" /></p>
<p>With your main do file done, continue with <a class="reference internal" href="#step2"><span class="std std-ref">Step 2</span></a>.</p>
</section>
</section>
<section id="step-2-place-config-do-where-the-main-do-file-is-located">
<span id="step2"></span><h2>Step 2: place <a class="reference external" href="http://config.do">config.do</a> where the main .do file is located<a class="headerlink" href="#step-2-place-config-do-where-the-main-do-file-is-located" title="Permalink to this heading">#</a></h2>
<div class="admonition-action-copy-the-template-config-do-https-github-com-aeadataeditor-replication-template-blob-master-template-config-do-to-the-right-location admonition">
<p class="admonition-title"><strong>[ACTION]</strong> Copy the  <a class="reference external" href="https://github.com/AEADataEditor/replication-template/blob/master/template-config.do"><code class="docutils literal notranslate"><span class="pre">template-config.do</span></code></a> to the right location.</p>
<p>You should copy it (using Windows actions, or command line) and paste it into the folder where the main file is located. Change the name from <code class="docutils literal notranslate"><span class="pre">template-config.do</span></code> to <code class="docutils literal notranslate"><span class="pre">config.do</span></code></p>
</div>
<p>The folder with the code, whether is the root directory or a subfolder, should look something like this:</p>
<p><img alt="Code_Repository" src="_images/code_repo.png" /></p>
</section>
<section id="step-3-include-config-do-in-the-main-do-file">
<h2>Step 3: include <a class="reference external" href="http://config.do">config.do</a> in the main .do file<a class="headerlink" href="#step-3-include-config-do-in-the-main-do-file" title="Permalink to this heading">#</a></h2>
<div class="admonition-action-add-a-call-to-the-config-do-file-in-the-main-do-file admonition">
<p class="admonition-title"><strong>[ACTION]</strong> Add a call to the <code class="docutils literal notranslate"><span class="pre">config.do</span></code> file in the main .do file.</p>
<p>Open the main .do file. In the beginning, add the line to include the <code class="docutils literal notranslate"><span class="pre">config.do</span></code>.</p>
</div>
<p>(You already did this if you <strong>created</strong> a main .do file in <a class="reference internal" href="#create-master"><span class="std std-ref">Step 1</span></a>.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="n">include</span> <span class="s2">&quot;config.do&quot;</span>
<span class="mi">2</span>
<span class="mi">3</span> <span class="o">/*</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">Master</span> <span class="n">do</span> <span class="n">file</span> <span class="o">*/</span>
</pre></div>
</div>
<blockquote>
<div><p>Save.</p>
</div></blockquote>
<ul class="simple">
<li><p>In some cases, authors will have code at the start of their dofile that does “housekeeping”, for example</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>	<span class="o">*</span> <span class="n">Housekeeping</span>
		<span class="n">cap</span> <span class="n">log</span> <span class="n">close</span>		
		<span class="nb">set</span> <span class="n">more</span> <span class="n">off</span>
		<span class="n">clear</span> <span class="nb">all</span>
		<span class="n">estimates</span> <span class="n">drop</span> <span class="n">_all</span>
		<span class="n">eststo</span> <span class="n">clear</span>	
		<span class="n">macro</span> <span class="n">drop</span> <span class="n">_all</span>
</pre></div>
</div>
<p>In this case, you should add <code class="docutils literal notranslate"><span class="pre">include</span> <span class="pre">&quot;config.do&quot;</span></code> <strong>after</strong> such commands, to avoid problems. Technically, the command <code class="docutils literal notranslate"><span class="pre">clear</span> <span class="pre">all</span></code> undoes many of the settings that our <code class="docutils literal notranslate"><span class="pre">config.do</span></code> does.</p>
</section>
<section id="step-4-modify-config-do">
<h2>Step 4: Modify <a class="reference external" href="http://config.do">config.do</a><a class="headerlink" href="#step-4-modify-config-do" title="Permalink to this heading">#</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">config.do</span></code> does 4 things:</p>
<ul class="simple">
<li><p>Creates a global variable called “rootdir” with the local path to the root directory.</p></li>
<li><p>Creates a logs files.</p></li>
<li><p>Sets a path to save the packages to be installed in the replication repository, and</p></li>
<li><p>It allows you to install the packages simply by listing their names.</p></li>
</ul>
</div>
<p>A crucial function of <code class="docutils literal notranslate"><span class="pre">config.do</span></code> is that it allows for the local installation of Stata packages, which is important for two reasons. First, it will enable us to check for the completeness of replication materials. Second, when running code in servers, we often do not have the necessary permissions to install Stata packages freely.<code class="docutils literal notranslate"><span class="pre">config.do</span></code> allow us to installed packages in the replication directory.</p>
<p>More information about modifying <code class="docutils literal notranslate"><span class="pre">config.do</span></code> can be found in “<a class="reference internal" href="96-01-using-config-stata.html#using-config-do"><span class="std std-ref">Using Config.do</span></a>”.</p>
</section>
<section id="step-5-modifying-paths-if-necessary-in-author-provided-code">
<span id="stata-step4-modifying-paths"></span><h2>Step 5: modifying paths if necessary in author-provided code<a class="headerlink" href="#step-5-modifying-paths-if-necessary-in-author-provided-code" title="Permalink to this heading">#</a></h2>
<div class="admonition-action-modify-paths-if-necessary admonition">
<p class="admonition-title"><strong>[ACTION]</strong> Modify paths if necessary.</p>
<ul class="simple">
<li><p>Check the Readme and determine if (and where) the root directory should be modified.</p></li>
<li><p>Open the .do file to be modified (probably the main .do file) and set the global variable <code class="docutils literal notranslate"><span class="pre">$rootdir</span></code> as the path.</p></li>
<li><p>Save.</p></li>
</ul>
</div>
<p>To run the code, we need to make sure that Stata can access the locally-saved data, access the packages that will be installed, and save the output in the computer where you are running the code. To do that, we often need to change some directory paths defined in the .do files provided. This step may vary in each replication package, so you need to look at the README instructions closely. Some packages may not require any change, while others may require a little more work.</p>
<p>However, the typical case will only require one modification, either to the main .do file or to a program called by the main .do file, where you define the path of the location of the replication package. This location is what we refer to as the “root directory”. Once this change is made, the code provided (if it follows good practices) will define every other path relative to the root directory.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this heading">#</a></h3>
<p>In the author’s main file, a global variable “maindir” defines the path of the root directory as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">clear</span> <span class="nb">all</span>

<span class="o">/*</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">Master</span> <span class="n">do</span> <span class="n">file</span> <span class="o">*/</span>

<span class="k">global</span> <span class="n">maindir</span> <span class="s2">&quot;C:\Users\Author\Dropbox\Project1&quot;</span> <span class="o">//</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">repository</span>
<span class="k">global</span> <span class="n">data</span> <span class="s2">&quot;$maindir/data&quot;</span> <span class="o">//</span> <span class="n">path</span> <span class="n">to</span> <span class="n">data</span> <span class="n">folder</span>
<span class="k">global</span> <span class="n">figures</span> <span class="s2">&quot;$maindir/figures&quot;</span> <span class="o">//</span> <span class="n">path</span> <span class="n">to</span> <span class="n">figures</span> <span class="n">folder</span>
</pre></div>
</div>
<p>You would add <code class="docutils literal notranslate"><span class="pre">config.do</span></code> and change the global.
After the change:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">clear</span> <span class="nb">all</span>
<span class="n">include</span> <span class="s2">&quot;config.do&quot;</span>

<span class="o">/*</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">Master</span> <span class="n">do</span> <span class="n">file</span> <span class="o">*/</span>

<span class="k">global</span> <span class="n">maindir</span> <span class="s2">&quot;$rootdir&quot;</span> <span class="o">//</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">repository</span>
<span class="k">global</span> <span class="n">data</span> <span class="s2">&quot;$maindir/data&quot;</span> <span class="o">//</span> <span class="n">path</span> <span class="n">to</span> <span class="n">data</span> <span class="n">folder</span>
<span class="k">global</span> <span class="n">figures</span> <span class="s2">&quot;$maindir/figures&quot;</span> <span class="o">//</span> <span class="n">path</span> <span class="n">to</span> <span class="n">figures</span> <span class="n">folder</span>
</pre></div>
</div>
</section>
</section>
<section id="step-6-modifying-the-main-do-file">
<span id="modify-main-do"></span><h2>Step 6: Modifying the main .do file<a class="headerlink" href="#step-6-modifying-the-main-do-file" title="Permalink to this heading">#</a></h2>
<div class="warning admonition">
<p class="admonition-title">You may have to modify some additional code in the <code class="docutils literal notranslate"><span class="pre">main.do</span></code> file.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">main.do</span></code>  provided by the authors contains <code class="docutils literal notranslate"><span class="pre">run</span></code> commands, you must replace them with <code class="docutils literal notranslate"><span class="pre">do</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">run</span></code> will hide much of the output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">do</span></code> will show output, in particular when code goes wrong.</p></li>
</ul>
</div>
<p>So if the <code class="docutils literal notranslate"><span class="pre">main.do</span></code> looks like this:</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="c1">***************************</span>

<span class="k">run</span> <span class="s">&quot;</span><span class="vg">${do}</span><span class="s">/2_transform_data.do&quot;</span>

<span class="c1">****************************************</span>
<span class="c1">* 3 * Append Denmark, Norway, Finland and Sweden</span>
<span class="c1">* depends on the previous step</span>
<span class="c1">****************************************</span>

<span class="k">run</span> <span class="s">&quot;</span><span class="vg">${do}</span><span class="s">/3_appending.do&quot;</span>

<span class="c1">****************************************</span>
<span class="c1">* 4 * Prepare the data for the ridgeline plots and maps</span>
<span class="c1">* depends on the previous step</span>
<span class="c1">****************************************</span>

<span class="k">run</span> <span class="s">&quot;</span><span class="vg">${do}</span><span class="s">/4_ridgeline_prep.do&quot;</span>
</pre></div>
</div>
<p>(etc.), then you must modify it so it looks like this:</p>
<div class="highlight-stata notranslate"><div class="highlight"><pre><span></span><span class="c1">***************************</span>

<span class="k">do</span> <span class="s">&quot;</span><span class="vg">${do}</span><span class="s">/2_transform_data.do&quot;</span>

<span class="c1">****************************************</span>
<span class="c1">* 3 * Append Denmark, Norway, Finland and Sweden</span>
<span class="c1">* depends on the previous step</span>
<span class="c1">****************************************</span>

<span class="k">do</span> <span class="s">&quot;</span><span class="vg">${do}</span><span class="s">/3_appending.do&quot;</span>

<span class="c1">****************************************</span>
<span class="c1">* 4 * Prepare the data for the ridgeline plots and maps</span>
<span class="c1">* depends on the previous step</span>
<span class="c1">****************************************</span>

<span class="k">do</span> <span class="s">&quot;</span><span class="vg">${do}</span><span class="s">/4_ridgeline_prep.do&quot;</span>
</pre></div>
</div>
<p>Save it, and proceed to the next step.</p>
</section>
<section id="step-7-run-the-code">
<span id="right-click-stata"></span><h2>Step 7: Run the Code<a class="headerlink" href="#step-7-run-the-code" title="Permalink to this heading">#</a></h2>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Windows</label><div class="sd-tab-content docutils">
<blockquote>
<div><p><strong>[ACTION]</strong> <strong>Right click</strong> on the master .do file and select the option <code class="docutils literal notranslate"><span class="pre">Execute</span> <span class="pre">(do)</span></code>.</p>
</div></blockquote>
<p><img alt="execute do" src="_images/execute-do.png" /></p>
<p>This option will set the working directory  to the location where the <code class="docutils literal notranslate"><span class="pre">master.do</span></code> is. It opens Stata and will show the processes in the Stata window.</p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
Mac/Linux</label><div class="sd-tab-content docutils">
<p>On Unix-style systems, the preferred way is to use the command line to run Stata code.</p>
<div class="dropdown admonition">
<p class="admonition-title"><strong>Mac-specific one-time setup</strong></p>
<p>Open Stata on your Mac, go to the “Stata” tab at the top of your screen and click “<code class="docutils literal notranslate"><span class="pre">Install</span> <span class="pre">Terminal</span> <span class="pre">Utility…</span></code>”</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title"><strong>BioHPC-specific setup</strong></p>
<p>On BioHPC, you need to expand your search path to find Stata.  Stata 14, 16, and 18 are currently available. You can then either call them directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">stata16</span><span class="o">/</span><span class="n">stata</span><span class="o">-</span><span class="n">mp</span> <span class="o">-</span><span class="n">b</span> <span class="n">do</span> <span class="n">main</span><span class="o">.</span><span class="n">do</span>
</pre></div>
</div>
<p>or add the location of the Stata to your <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> variable, which you will need to do every time you open a terminal windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PATH=/usr/local/stata16:$PATH
stata-mp -b do main.do
</pre></div>
</div>
</div>
<p>Open up a terminal in the folder where the <code class="docutils literal notranslate"><span class="pre">master.do</span></code> file is located - this may differ depending on your system, and may involve changing directory</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">code</span>
</pre></div>
</div>
<p>Confirm with “<code class="docutils literal notranslate"><span class="pre">ls</span></code>” that you see the same files you might see in Finder / File Explorer. Refer to the command line training in the initial training.</p>
<p>Identify which Stata version you have installed (some systems have only one, some have multiple):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">which</span> <span class="n">stata</span>
<span class="n">which</span> <span class="n">stata</span><span class="o">-</span><span class="n">se</span>
<span class="n">which</span> <span class="n">stata</span><span class="o">-</span><span class="n">mp</span>
</pre></div>
</div>
<p>Each version is increasingly powerful. Choose the most powerful one installed on your system. (We will assume that you have <code class="docutils literal notranslate"><span class="pre">stata-mp</span></code> but adjust accordingly)</p>
<p>Then  type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stata</span><span class="o">-</span><span class="n">mp</span> <span class="o">-</span><span class="n">b</span> <span class="n">do</span> <span class="n">master</span><span class="o">.</span><span class="n">do</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-2">
Windows Double-click </label><div class="sd-tab-content docutils">
<p>In some cases, the right-click menu may not contain the <code class="docutils literal notranslate"><span class="pre">Execute</span> <span class="pre">(do)</span></code> option. In that case, the following workaround also works; but does not automatically exit Stata when the do file is done. Start by <strong>double-clicking</strong> on the <code class="docutils literal notranslate"><span class="pre">master.do</span></code> file. This should open the Stata Editor window:</p>
<p><img alt="Double-click Do file" src="_images/stata-editor-window.png" /></p>
<p>Now click on the circled green triangle to run the do file.</p>
<p>If double-clicking the do file does not open Stata, you may need to check the <code class="docutils literal notranslate"><span class="pre">Properties</span></code> tab. Right-click on the do file and select <code class="docutils literal notranslate"><span class="pre">Properties</span></code>. In the <code class="docutils literal notranslate"><span class="pre">General</span></code> tab, you may see an option to <code class="docutils literal notranslate"><span class="pre">Change</span></code> the default program that opens the do file. You may need to choose <code class="docutils literal notranslate"><span class="pre">Choose</span> <span class="pre">an</span> <span class="pre">app</span> <span class="pre">from</span> <span class="pre">your</span> <span class="pre">PC</span></code>:</p>
<p><img alt="Choose app on your PC dialog" src="_images/windows11-set-default-app.png" /></p>
<p>Then navigate to the Stata executable (e.g., <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Stata18\StataMP-64.exe</span></code>) and select it:</p>
<p><img alt="Select Stata executable" src="_images/windows11-set-stata18-app.png" /></p>
<p>Then click <code class="docutils literal notranslate"><span class="pre">OK</span></code> and <code class="docutils literal notranslate"><span class="pre">Apply</span></code> to save the changes. Now double-clicking the do file should open it in Stata.</p>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-3">
Windows terminal</label><div class="sd-tab-content docutils">
<p>Instead of using the graphical “right-click” method, you can also use the command line in Windows. For <code class="docutils literal notranslate"><span class="pre">bash</span></code>, use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">code</span>
 <span class="o">/</span><span class="n">c</span><span class="o">/</span><span class="n">Program</span>\ <span class="n">Files</span><span class="o">/</span><span class="n">Stata18</span><span class="o">/</span><span class="n">StataMP</span><span class="o">-</span><span class="mf">64.</span><span class="n">exe</span> <span class="o">-</span><span class="n">b</span> <span class="n">master</span><span class="o">.</span><span class="n">do</span>
</pre></div>
</div>
<p>For Powershell, use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span> <span class="s1">&#39;C:\Program Files\Stata18\StataMP-64.exe&#39;</span> <span class="o">-</span><span class="n">b</span> <span class="n">master</span><span class="o">.</span><span class="n">do</span>
</pre></div>
</div>
</div>
</div>
<section id="checking-for-a-complete-run-debugging-and-running-the-master-in-pieces">
<h3>Checking for a complete run, debugging and running the master in pieces<a class="headerlink" href="#checking-for-a-complete-run-debugging-and-running-the-master-in-pieces" title="Permalink to this heading">#</a></h3>
<p>After running the code, the log files will need to be checked for a complete run. <strong>Use Visual Studio Code to open and inspect log files</strong>. Any bugs that prevents a complete run will also show up in the log files.</p>
<p>If a you find a bug that is simple enough to fix, you can make changes to the do files. Then,  you can right click on the master file and select <code class="docutils literal notranslate"><span class="pre">Execute</span> <span class="pre">(do)</span></code> as this option will open Stata, allowing to run the code interactively.</p>
<p>If you decide the code needs to be run in pieces (this is NOT ideal)</p>
<ul class="simple">
<li><p>In the master .do file, you can comment out (using the symbol *) the programs that are not to be run and save the master.</p></li>
<li><p>Then, you can right click on the master and select the option ``Execute (do)`.</p></li>
</ul>
<p>When <a class="reference internal" href="96-05-debugging-stata.html#debugging-stata"><span class="std std-ref">debugging</span></a> is complete, you can uncomment all programs in the master and make a clean run, using again <code class="docutils literal notranslate"><span class="pre">Execute</span> <span class="pre">Quietly</span> <span class="pre">(run)</span></code>.</p>
<blockquote>
<div><p>Consider how much time a complete run would take before you run everything one last time. If it would take too long, you may want to skip a complete run, but ensure that you have log files for all partial runs. Make a note of this in the report.</p>
</div></blockquote>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="96-01-using-config-stata.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Using config.do in STATA</p>
      </div>
    </a>
    <a class="right-next"
       href="96-03-stata-scan-packages.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Using scan_packages.do</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-check-for-a-main-do-file">Step 1: check for a “main” .do file</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#when-a-main-do-file-is-provided">When a main .do file is provided</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#when-a-main-do-file-is-not-provided">When a main .do file is NOT provided</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-place-config-do-where-the-main-do-file-is-located">Step 2: place config.do where the main .do file is located</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-include-config-do-in-the-main-do-file">Step 3: include config.do in the main .do file</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-modify-config-do">Step 4: Modify config.do</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-5-modifying-paths-if-necessary-in-author-provided-code">Step 5: modifying paths if necessary in author-provided code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-6-modifying-the-main-do-file">Step 6: Modifying the main .do file</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#step-7-run-the-code">Step 7: Run the Code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#checking-for-a-complete-run-debugging-and-running-the-master-in-pieces">Checking for a complete run, debugging and running the master in pieces</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Lars Vilhuber, Dane Clunk, Michael Darisse, Sofia Encarnación, Julia Hewitt, Ilanith Nizard, Leonel Borja Plaza, Takshil Sachdev, Hyuk Son, Linda Wang, David Wasser, Meredith Welch
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2018-2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>